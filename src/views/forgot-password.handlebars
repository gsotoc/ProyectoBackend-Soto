<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Recuperar Contraseña</title>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>Recuperar Contraseña</h1>
      <p>Ingresa tu correo electrónico y te enviaremos un enlace para restablecer tu contraseña.</p>
    </div>

    {{#if error}}
      <div class="alert alert-error">
        {{#if (eq error "email_required")}}
          ⚠️ El correo electrónico es obligatorio
        {{else if (eq error "invalid_token")}}
          ⚠️ El enlace de recuperación es inválido
        {{else if (eq error "token_expired")}}
          ⚠️ El enlace de recuperación ha expirado. Solicita uno nuevo.
        {{else}}
          ⚠️ Ocurrió un error. Inténtalo nuevamente.
        {{/if}}
      </div>
    {{/if}}

    {{#if success}}
      <div class="alert alert-success">
        {{#if (eq success "email_sent")}}
          ✅ Si el correo existe, recibirás instrucciones para recuperar tu contraseña. Revisa tu bandeja de entrada.
        {{/if}}
      </div>
    {{/if}}

    <form action="/api/sessions/forgot-password" method="POST">
      <div class="form-group">
        <label for="email">Correo Electrónico</label>
        <input 
          type="email" 
          id="email" 
          name="email" 
          placeholder="tu@email.com" 
          required
          autocomplete="email"
        >
      </div>

      <button type="submit" class="btn">Enviar Enlace de Recuperación</button>
    </form>

    <div class="back-link">
      <a href="/api/sessions/login">← Volver al inicio de sesión</a>
    </div>
  </div>

  <script>
    // Helper Handlebars para comparación
    Handlebars.registerHelper('eq', function(a, b) {
      return a === b;
    });
  </script>
</body>
</html>