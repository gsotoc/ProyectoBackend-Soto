<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Register</title>
  <link rel="stylesheet" href="/styles/home.css">
</head>
<body>
  <div class="form-container">

    <h1>Registro de Usuario</h1>

    <form class="card-form" action="/api/sessions/register" method="POST">
      <div>
        <label for="first_name">Nombre:</label>
        <input 
          type="text" 
          name="first_name" 
          id="first_name" 
          required
        />
      </div>

      <div>
        <label for="last_name">Apellido:</label>
        <input 
          type="text" 
          name="last_name" 
          id="last_name" 
          required
        />
      </div>

      <div>
        <label for="email">Email:</label>
        <input 
          type="email" 
          name="email" 
          id="email" 
          required
        />
      </div>

      <div>
        <label for="age">Edad:</label>
        <input 
          type="number" 
          name="age" 
          id="age" 
          required
        />
      </div>

      <div>
        <label for="password">Contraseña:</label>
        <input 
          type="password" 
          name="password" 
          id="password" 
          required
        />
      </div>

      <button type="submit">Registrarse</button>
    </form>

    <div>
      <p>Ya tienes una cuenta? <a href="/api/sessions/login">Ingresa aquí</a></p>
    </div>

    {{#if error}}
      <div class="alert alert-error">
        {{#if (eq error "user_exists")}}
          El usuario ya está registrado. <a href="/api/sessions/login">Inicia sesión aquí</a>
        {{else if (eq error "too_many_attempts")}}
          Demasiados intentos de registro desde esta ubicación. Por tu seguridad, espera 1 hora antes de intentar nuevamente.
        {{else}}
          Ocurrió un error al registrarse. Inténtalo nuevamente.
        {{/if}}
      </div>
    {{/if}}

    {{#if success}}
      <div class="alert alert-success">
        {{#if (eq success "registered")}}
          ✅ Registro exitoso. Ya puedes <a href="/api/sessions/login">iniciar sesión</a>.
        {{/if}}
      </div>
    {{/if}}

    {{#if success}}
      <p>{{success}}</p>
    {{/if}}
  </div>

</body>
</html>